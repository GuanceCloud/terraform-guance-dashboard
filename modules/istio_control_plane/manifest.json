{
  "dashboardBindSet": [],
  "dashboardExtend": {},
  "dashboardMapping": [],
  "dashboardOwnerType": "node",
  "dashboardType": "CUSTOM",
  "iconSet": {
    "icon": "https://static-res.guance.com/dataflux-template/dashboard/istio_control_plane/icon.svg",
    "url": "https://static-res.guance.com/dataflux-template/dashboard/istio_control_plane/istio_control_plane.png"
  },
  "main": {
    "charts": [
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": true,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Deployed Versions"
        },
        "name": "Pilot Versions",
        "pos": {
          "h": 11,
          "w": 24,
          "x": 0,
          "y": 2.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "istio_build",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "filters": [],
              "funcList": [],
              "groupBy": [
                "tag"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`istio_build`)) BY `tag`",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": true,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [
              {
                "key": "virtual memory",
                "name": "virtual memory",
                "unit": "",
                "units": [
                  "digital",
                  "B"
                ]
              },
              {
                "key": "resident memory",
                "name": "resident memory",
                "unit": "",
                "units": [
                  "digital",
                  "B"
                ]
              }
            ],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Resource Usage"
        },
        "name": "Memory",
        "pos": {
          "h": 11,
          "w": 8,
          "x": 0,
          "y": 16
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "virtual memory",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "process_virtual_memory_bytes",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "809c9ac1-bef3-11ec-8504-5ffc0604c096",
                  "logic": "and",
                  "name": "app_id",
                  "op": "=",
                  "value": "istiod"
                },
                {
                  "id": "f642cb10-c136-11ec-9395-e9930f5f7603",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`process_virtual_memory_bytes`) AS `virtual memory`) { `app_id` = 'istiod' and `cluster_name_k8s` = '#{cluster_name_k8s}' }",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "resident memory",
              "code": "C",
              "dataSource": "istio_prom",
              "field": "process_resident_memory_bytes",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "8233b581-bef3-11ec-8504-5ffc0604c096",
                  "logic": "and",
                  "name": "app_id",
                  "op": "=",
                  "value": "istiod"
                },
                {
                  "id": "ffccf660-c136-11ec-9395-e9930f5f7603",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`process_resident_memory_bytes`) AS `resident memory`) { `app_id` = 'istiod' and `cluster_name_k8s` = '#{cluster_name_k8s}' }",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Resource Usage"
        },
        "name": "CPU",
        "pos": {
          "h": 11,
          "w": 8,
          "x": 8,
          "y": 16
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "process",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "process_cpu_seconds_total",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "d3c0abb0-0ca5-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "d3c0abb1-0ca5-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "app_id",
                  "op": "=",
                  "value": "istiod"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "IRATE(\"M::`istio_prom`:(AVG(`process_cpu_seconds_total`) AS `process`) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `app_id` = 'istiod' }\")",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "irate"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "auto",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Resource Usage"
        },
        "name": "Goroutines",
        "pos": {
          "h": 11,
          "w": 8,
          "x": 16,
          "y": 16
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "code": "A",
              "dataSource": "istio_prom",
              "field": "go_goroutines",
              "fieldFunc": "avg",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`go_goroutines`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' }",
              "queryFuncs": [],
              "type": "dql",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": true,
          "settings": {
            "chartType": "bar",
            "colors": [
              {
                "color": "#D15B80",
                "key": "cds{\"cluster_name_k8s\": \"all\"}",
                "name": "cds{\"cluster_name_k8s\": \"all\"}"
              }
            ],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [
              {
                "key": "cds",
                "name": "cds",
                "unit": "ops/s",
                "units": [
                  "custom",
                  "ops/s"
                ]
              }
            ],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Pilot Push Information"
        },
        "name": "Pilot Pushes",
        "pos": {
          "h": 11,
          "w": 8,
          "x": 0,
          "y": 29.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "cds",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "pilot_xds_pushes",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "c7f68600-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "type",
                  "op": "=",
                  "value": "cds"
                },
                {
                  "id": "c7f68601-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "IRATE(\"M::`istio_prom`:(AVG(`pilot_xds_pushes`) AS `cds`) { `type` = 'cds' and `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`\").SERIES_SUM()",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "irate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": true,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "eds",
              "code": "B",
              "dataSource": "istio_prom",
              "field": "pilot_xds_pushes",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "c9f36770-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "type",
                  "op": "=",
                  "value": "eds"
                },
                {
                  "id": "c9f36771-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "IRATE(\"M::`istio_prom`:(AVG(`pilot_xds_pushes`) AS `eds`) { `type` = 'eds' and `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`\").SERIES_SUM()",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "irate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": true,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "ids",
              "code": "C",
              "dataSource": "istio_prom",
              "field": "pilot_xds_pushes",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "cbe54c60-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "type",
                  "op": "=",
                  "value": "lds"
                },
                {
                  "id": "cbe54c61-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "IRATE(\"M::`istio_prom`:(AVG(`pilot_xds_pushes`) AS `ids`) { `type` = 'lds' and `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`\").SERIES_SUM()",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "irate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": true,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "rds",
              "code": "D",
              "dataSource": "istio_prom",
              "field": "pilot_xds_pushes",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "ccba0180-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "type",
                  "op": "=",
                  "value": "rds"
                },
                {
                  "id": "ccba0181-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "IRATE(\"M::`istio_prom`:(AVG(`pilot_xds_pushes`) AS `rds`) { `type` = 'rds' and `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`\").SERIES_SUM()",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "irate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": true,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "sds",
              "code": "E",
              "dataSource": "istio_prom",
              "field": "pilot_xds_pushes",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "cd6a17a0-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "type",
                  "op": "=",
                  "value": "sds"
                },
                {
                  "id": "cd6a17a1-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "IRATE(\"M::`istio_prom`:(AVG(`pilot_xds_pushes`) AS `sds`) { `type` = 'sds' and `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`\").SERIES_SUM()",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "irate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": true,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "nds",
              "code": "F",
              "dataSource": "istio_prom",
              "field": "pilot_xds_pushes",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "cf5c23a0-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "type",
                  "op": "=",
                  "value": "nds"
                },
                {
                  "id": "cf5c23a1-0ca6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "IRATE(\"M::`istio_prom`:(AVG(`pilot_xds_pushes`) AS `nds`) { `type` = 'nds' and `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`\").SERIES_SUM()",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "irate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Pilot Push Information"
        },
        "name": "Conflicts",
        "pos": {
          "h": 11,
          "w": 8,
          "x": 8,
          "y": 29.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "Inbound Listeners",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "pilot_conflict_inbound_listener",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "ea6b1a00-0ca8-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "ea6b1a01-0ca8-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "app_id",
                  "op": "=",
                  "value": "istiod"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`pilot_conflict_inbound_listener`) AS `Inbound Listeners`) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `app_id` = 'istiod' }",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "Outbound Listeners (http over current tcp)",
              "code": "B",
              "dataSource": "istio_prom",
              "field": "pilot_conflict_outbound_listener_http_over_current_tcp",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "f10a5a60-0ca8-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "f10a5a61-0ca8-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "app_id",
                  "op": "=",
                  "value": "istiod"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`pilot_conflict_outbound_listener_http_over_current_tcp`) AS `Outbound Listeners (http over current tcp)`) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `app_id` = 'istiod' }",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "Outbound Listeners (tcp over current tcp)",
              "code": "C",
              "dataSource": "istio_prom",
              "field": "pilot_conflict_outbound_listener_tcp_over_current_tcp",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "f25a0be0-0ca8-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "f25a0be1-0ca8-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "app_id",
                  "op": "=",
                  "value": "istiod"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`pilot_conflict_outbound_listener_tcp_over_current_tcp`) AS `Outbound Listeners (tcp over current tcp)`) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `app_id` = 'istiod' }",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Pilot Push Information"
        },
        "name": "ADS Monitoring",
        "pos": {
          "h": 11,
          "w": 8,
          "x": 16,
          "y": 29.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "Virtual Services",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "pilot_virt_services",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "27308150-0ca9-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "27308151-0ca9-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "app_id",
                  "op": "=",
                  "value": "istiod"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`pilot_virt_services`) AS `Virtual Services`) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `app_id` = 'istiod' }",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "Services",
              "code": "B",
              "dataSource": "istio_prom",
              "field": "pilot_services",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "295f4830-0ca9-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "295f4831-0ca9-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "app_id",
                  "op": "=",
                  "value": "istiod"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`pilot_services`) AS `Services`) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `app_id` = 'istiod' }",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "Connected Endpoints {{pod}}",
              "code": "C",
              "dataSource": "istio_prom",
              "field": "pilot_xds",
              "fieldFunc": "sum",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "34dc90f0-0ca9-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "id": "34dc90f1-0ca9-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "app_id",
                  "op": "=",
                  "value": "istiod"
                }
              ],
              "funcList": [],
              "groupBy": [
                "pod_name"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(SUM(`pilot_xds`) AS `Connected Endpoints {{pod}}`) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `app_id` = 'istiod' } BY `pod_name`",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Envoy Information"
        },
        "name": "Envoy Details",
        "pos": {
          "h": 11,
          "w": 8,
          "x": 0,
          "y": 43
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "XDS Connections",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "envoy_cluster_upstream_cx_total",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "f72e6460-0cb5-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name",
                  "op": "=",
                  "value": "xds-grpc"
                },
                {
                  "id": "ff2608d0-0cb5-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "IRATE(\"M::`istio_prom`:(AVG(`envoy_cluster_upstream_cx_total`) AS `XDS Connections`) { `cluster_name` = 'xds-grpc' and `cluster_name_k8s` = '#{cluster_name_k8s}' }\").SERIES_SUM()",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "irate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "XDS Connection Failures",
              "code": "B",
              "dataSource": "istio_prom",
              "field": "envoy_cluster_upstream_cx_connect_fail",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "d15e8580-0cb5-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name",
                  "op": "=",
                  "value": "xds-grpc"
                },
                {
                  "id": "04f527f0-0cb6-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "IRATE(\"M::`istio_prom`:(AVG(`envoy_cluster_upstream_cx_connect_fail`) AS `XDS Connection Failures`) { `cluster_name` = 'xds-grpc' and `cluster_name_k8s` = '#{cluster_name_k8s}' } BY `cluster_name_k8s`\").SERIES_SUM()",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "irate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": true,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "C",
              "dataSource": "istio_prom",
              "field": "envoy_server_hot_restart_epoch",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "filters": [
                {
                  "id": "a251a3c0-bc8e-11ec-a9d9-0fbe26e72d8f",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`envoy_server_hot_restart_epoch`)) { `cluster_name_k8s` = '#{cluster_name_k8s}' }",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Envoy Information"
        },
        "name": "XDS Active Connections",
        "pos": {
          "h": 11,
          "w": 8,
          "x": 8,
          "y": 43
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "XDS Active Connections",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "envoy_cluster_upstream_cx_active",
              "fieldFunc": "sum",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "value": "#{cluster_name_k8s}"
                },
                {
                  "logic": "and",
                  "name": "cluster_name",
                  "op": "=",
                  "value": "xds-grpc"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(SUM(`envoy_cluster_upstream_cx_active`) AS `XDS Active Connections`) { `cluster_name_k8s` = '#{cluster_name_k8s}' and `cluster_name` = 'xds-grpc' }",
              "queryFuncs": [],
              "type": "dql",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Envoy Information"
        },
        "name": "XDS Requests Size",
        "pos": {
          "h": 11,
          "w": 8,
          "x": 16,
          "y": 43
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "envoy_cluster_upstream_cx_rx_bytes_total",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "a6243ff0-0cb9-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name",
                  "op": "=",
                  "value": "xds-grpc"
                },
                {
                  "id": "a7680a90-0cb9-11ed-94ff-230fee90ea1a",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "#{cluster_name_k8s}"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "RATE(\"M::`istio_prom`:(AVG(`envoy_cluster_upstream_cx_rx_bytes_total`)) { `cluster_name` = 'xds-grpc' and `cluster_name_k8s` = '#{cluster_name_k8s}' }\")",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "rate"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": true,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "B",
              "dataSource": "istio_prom",
              "field": "envoy_cluster_upstream_cx_rx_bytes_total",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "filters": [
                {
                  "id": "fe309f20-bc8e-11ec-a9d9-0fbe26e72d8f",
                  "logic": "and",
                  "name": "cluster_name_k8s",
                  "op": "=",
                  "type": "",
                  "value": "xds-grpc"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`envoy_cluster_upstream_cx_rx_bytes_total`)) { `cluster_name_k8s` = 'xds-grpc' }",
              "queryFuncs": [],
              "type": "simple"
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": false,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "C",
              "dataSource": "istio_prom",
              "field": "envoy_cluster_upstream_cx_tx_bytes_total",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "a5591b90-bef8-11ec-8504-5ffc0604c096",
                  "logic": "and",
                  "name": "cluster_name",
                  "op": "=",
                  "value": "xds-grpc"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "RATE(\"M::`istio_prom`:(AVG(`envoy_cluster_upstream_cx_tx_bytes_total`)) { `cluster_name` = 'xds-grpc' }\")",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "rate"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": true,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "D",
              "dataSource": "istio_prom",
              "field": "envoy_cluster_upstream_cx_tx_bytes_total",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [
                {
                  "id": "a5591b90-bef8-11ec-8504-5ffc0604c096",
                  "logic": "and",
                  "name": "cluster_name",
                  "op": "=",
                  "value": "xds-grpc"
                }
              ],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "M::`istio_prom`:(AVG(`envoy_cluster_upstream_cx_tx_bytes_total`)) { `cluster_name` = 'xds-grpc' }",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Webhooks"
        },
        "name": "Configuration Validation",
        "pos": {
          "h": 11,
          "w": 12,
          "x": 0,
          "y": 56.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "Validations (Success)",
              "code": "B",
              "dataSource": "istio_prom",
              "field": "galley_validation_passed",
              "fieldFunc": "avg",
              "fill": null,
              "fillNum": null,
              "filters": [],
              "funcList": [],
              "groupBy": [
                "cluster_name_k8s"
              ],
              "groupByTime": "",
              "namespace": "metric",
              "q": "RATE(\"M::`istio_prom`:(AVG(`galley_validation_passed`) AS `Validations (Success)`) BY `cluster_name_k8s`\").series_sum() ",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "rate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "dql",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "name": "",
            "qtype": "dql",
            "query": {
              "code": "A",
              "funcList": [],
              "q": "RATE(\"M::`istio_prom`:(AVG(`galley_validation_failed`) AS `galley validation failed`) BY `cluster_name_k8s`\").series_sum() ",
              "type": "dql"
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      },
      {
        "extend": {
          "fixedTime": "",
          "isRefresh": false,
          "settings": {
            "chartType": "areaLine",
            "colors": [],
            "compareTitle": "",
            "compareType": "",
            "currentChartType": "sequence",
            "density": "medium",
            "fixedTime": "",
            "isPercent": false,
            "isTimeInterval": true,
            "levels": [],
            "openCompare": false,
            "openStack": false,
            "showFieldMapping": false,
            "showLine": false,
            "showTitle": true,
            "stackType": "time",
            "timeInterval": "default",
            "titleDesc": "",
            "units": [],
            "xAxisShowType": "time"
          }
        },
        "group": {
          "name": "Webhooks"
        },
        "name": "Sidecar Injection",
        "pos": {
          "h": 11,
          "w": 12,
          "x": 12,
          "y": 56.5
        },
        "queries": [
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": false,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "Injections (Success)",
              "code": "A",
              "dataSource": "istio_prom",
              "field": "sidecar_injection_success_total",
              "fieldFunc": "avg",
              "fieldType": "float",
              "fill": null,
              "fillNum": null,
              "filters": [],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "RATE(\"M::`istio_prom`:(AVG(`sidecar_injection_success_total`) AS `Injections (Success)`)\").SERIES_SUM()",
              "queryFuncs": [
                {
                  "args": [],
                  "name": "rate"
                },
                {
                  "args": [],
                  "name": "series_sum"
                }
              ],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          },
          {
            "color": "",
            "datasource": "dataflux",
            "disabled": true,
            "name": "",
            "qtype": "dql",
            "query": {
              "alias": "",
              "code": "B",
              "dataSource": "istio_prom",
              "fieldFunc": "avg",
              "fieldType": "",
              "fill": null,
              "fillNum": null,
              "filters": [],
              "funcList": [],
              "groupBy": [],
              "groupByTime": "",
              "namespace": "metric",
              "q": "",
              "queryFuncs": [],
              "type": "simple",
              "withLabels": []
            },
            "type": "sequence",
            "unit": ""
          }
        ],
        "type": "sequence"
      }
    ],
    "groups": [
      "Deployed Versions",
      "Resource Usage",
      "Pilot Push Information",
      "Envoy Information",
      "Webhooks"
    ],
    "type": "template",
    "vars": [
      {
        "code": "cluster_name_k8s",
        "datasource": "dataflux",
        "definition": {
          "defaultVal": {
            "label": "*",
            "value": "re(`.*`)"
          },
          "field": "",
          "metric": "",
          "object": "",
          "tag": "",
          "value": "show_tag_value(from=['istio_prom'], keyin=['cluster_name_k8s'])[1m]"
        },
        "hide": 0,
        "name": "集群名称",
        "seq": 0,
        "type": "QUERY",
        "valueSort": "default"
      },
      {
        "code": "namespace",
        "datasource": "dataflux",
        "definition": {
          "defaultVal": {
            "label": "*",
            "value": "re(`.*`)"
          },
          "field": "",
          "metric": "",
          "object": "",
          "tag": "",
          "value": "show_tag_value(from=['istio_prom'], keyin=['namespace']){cluster_name_k8s='#{cluster_name_k8s}'}[1m]"
        },
        "hide": 1,
        "name": "命名空间",
        "seq": 1,
        "type": "QUERY",
        "valueSort": "default"
      }
    ]
  },
  "summary": "",
  "tagInfo": [],
  "tags": [],
  "thumbnail": "",
  "title": "Istio Control Plane 监控视图"
}